/*! call-picasa v0.0.5 | (c) 2015 @mjeightyfive | https://github.com/mjeightyfive/call-picasa */
"use strict";!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n:e.Callpicasa=n()}(this,function(){function e(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)"undefined"===e[o]&&(e[o]=t[o])}return e}function n(f){var c=e(f||{},n.options,r),s=function(e){t(i+c.userID+"?"+u,e)},a=function(e){var n=[];t(i+c.userID+"?"+u,function(t){var u=JSON.parse(t);o(u.feed.entry,function(e){var t=e.title.$t,o=e.gphoto$albumType;if(t){var u=-1!==c.excludeAlbumsNames.indexOf(t);if(!u)if(o){var i=e.gphoto$albumType.$t,r=-1!==c.excludeAlbumsTypes.indexOf(i);r||n.push(e)}else n.push(e)}}),e&&e(n)})},l=function(e){var n=[];a(function(t){o(t,function(e){n.push(e.link[0].href)}),e&&e(n)})},p=function(e,n){var u=[],i=c.size+"/",r=/([^\/]+)$/;t(e,function(e){var t=JSON.parse(e);o(t.feed.entry,function(e){var n=e.content.src.replace(r,i);u.push(n)}),n&&n(u)})},m=function(e,n){o(e,function(e){p(e,function(e){o(e,function(e){n&&n(e)})})})},g=function(e){l(function(n){m(n,function(n){e&&(console.log("image",n),e(n))})})},v=function(e,n){var t=[];a(function(u){o(u,function(n){-1!==n.title.$t.indexOf(e)&&t.push(n.link[0].href)}),n&&n(t)})},d=function(e,n){var t=[];v(e,function(e){o(e,function(e){p(e,function(e){o(e,function(e){t.push(e)}),n&&n(t)})})})};return{getUserData:s,getAlbums:a,getAlbumsURLs:l,getAlbumsImages:g,getAlbumsByName:v,getImagesByAlbumName:d}}var t=function(e,n){var t=new XMLHttpRequest;t.open("get",e,!0),t.onload=function(){var e=t.status;200===e?n&&n(t.response):console.log("error!")},t.send()},o=function(e,n,t){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(t,e[o],o,e);else for(var u=0,i=e.length;i>u;u++)n.call(t,e[u],u,e)},u="alt=json",i="https://picasaweb.google.com/data/feed/api/user/",r={userID:"mjeightyfive",size:"h720",excludeAlbumsNames:[],excludeAlbumsTypes:[]};return n});